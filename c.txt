# Variable to hold the name of the bucket you want to delete.
variable "bucket_to_delete" {
  description = "The name of the S3 bucket to delete."
  type        = string
}

# This null_resource acts as a trigger for the deletion command.
# The command only runs when this resource is destroyed.
resource "null_resource" "s3_bucket_deleter" {

  # The provisioner runs a command on the machine executing Terraform.
  provisioner "local-exec" {
    # 'when = destroy' ensures this only runs during 'terraform destroy'.
    when = destroy

    # The command to run. 'aws s3 rb --force' removes all objects
    # and then deletes the bucket itself.
    command = "aws s3 rb s3://${var.bucket_to_delete} --force"
  }
}
