resource "aws_cloudwatch_event_rule" "ssm_runcommand_failed_alarm_rule" {
  name        = "capture-ssm-runcommand-failed-alarm-state-change"
  description = "Triggers when the ssm_runcommand_failed alarm changes state."

  event_pattern = jsonencode({
    source      = ["aws.cloudwatch"],
    "detail-type" = ["CloudWatch Alarm State Change"],
    resources   = ["arn:aws:cloudwatch:us-east-1:140793889552:alarm:ssm_runcommand_failed"]
  })
}
