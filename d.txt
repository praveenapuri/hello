# main.tf (in your project's root directory)

# Configure the AWS Provider
provider "aws" {
  region = "us-east-1"
}

# Deploy the EC2 dashboard for a web server
module "web_server_dashboard" {
  source = "./modules/ec2-dashboard" # Path to the module

  instance_id      = "i-0abcdef1234567890" # <-- Required: Specify your instance ID
  aws_region       = "us-east-1"
  disk_device      = "nvme0n1p1"
  disk_path        = "/"
  file_system_type = "xfs"
}

# Deploy a second dashboard for a database server
module "db_server_dashboard" {
  source = "./modules/ec2-dashboard"

  instance_id          = "i-0987654321fedcba0" # <-- Required: Specify your instance ID
  dashboard_name_prefix = "DB-Server-Health"
  aws_region           = "us-east-1"
}

# Output the names of the created dashboards
output "web_server_dashboard_name" {
  value = module.web_server_dashboard.dashboard_name
}

output "db_server_dashboard_name" {
  value = module.db_server_dashboard.dashboard_name
}
