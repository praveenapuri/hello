variable "environments" {
  description = "List of environments"
  type        = list(string)
  default     = ["prod", "dr"]
}

variable "dns_entries" {
  description = "DNS records for each environment"
  type        = map(string)
  default = {
    "prod" = "app.example.com"
    "dr"   = "dr-app.example.com"
  }
}

data "aws_route53_zone" "example" {
  name         = "example.com."
  private_zone = false
}

resource "aws_route53_record" "dns_entry" {
  for_each = var.dns_entries

  zone_id = data.aws_route53_zone.example.zone_id
  name    = each.value
  type    = "CNAME"
  ttl     = 300
  records = [each.value]
}
