variable "use_dr" {
  description = "Set to true to switch to DR environment"
  type        = bool
  default     = false
}

provider "aws" {
  region = "us-east-1"
}

resource "aws_route53_record" "dns_record" {
  for_each = local.dns_records
  zone_id  = "Z1234567890"
  name     = each.key
  type     = each.value.type
  ttl      = "300"
  records  = var.use_dr ? [each.value.dr] : [each.value.primary]
  lifecycle {
    create_before_destroy = true
  }
}
